<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Get Started with Oakestra Table of content:
High-level archtecture Create your first Oakestra cluster Deploy your first applications High-level architecture Oakestra lets you deploy your workload on devices of any size. From a small RasperryPi to a cloud instance far away on GCP or AWS. The tree structure enables you to create multiple clusters of resources.
The Root Orchestrator manages different clusters of resources. The root only sees aggregated cluster resources.'><title>Get Started with Oakestra</title>

<link rel='canonical' href='https://oakestra.io/docs/getstarted/get-started/'>

<link rel="stylesheet" href="/scss/style.min.38a22ec8067cb9166f6603b0cfdc934c60033aa56941cdb683c24c8f6741465c.css"><meta property='og:title' content='Get Started with Oakestra'>
<meta property='og:description' content='Get Started with Oakestra Table of content:
High-level archtecture Create your first Oakestra cluster Deploy your first applications High-level architecture Oakestra lets you deploy your workload on devices of any size. From a small RasperryPi to a cloud instance far away on GCP or AWS. The tree structure enables you to create multiple clusters of resources.
The Root Orchestrator manages different clusters of resources. The root only sees aggregated cluster resources.'>
<meta property='og:url' content='https://oakestra.io/docs/getstarted/get-started/'>
<meta property='og:site_name' content='Oakestra'>
<meta property='og:type' content='article'><meta property='article:section' content='Docs' /><meta property='article:tag' content='GetSarted' /><meta property='article:published_time' content='2022-08-08T15:56:27&#43;02:00'/><meta property='article:modified_time' content='2022-08-08T15:56:27&#43;02:00'/>
<meta name="twitter:title" content="Get Started with Oakestra">
<meta name="twitter:description" content="Get Started with Oakestra Table of content:
High-level archtecture Create your first Oakestra cluster Deploy your first applications High-level architecture Oakestra lets you deploy your workload on devices of any size. From a small RasperryPi to a cloud instance far away on GCP or AWS. The tree structure enables you to create multiple clusters of resources.
The Root Orchestrator manages different clusters of resources. The root only sees aggregated cluster resources.">
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu7fc94d4596db6a879669a889061e6268_294933_300x0_resize_box_3.png" width="300"
                            height="287" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Oakestra</a></h1>
            <h2 class="site-description"></h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/oakestra'
                        target="_blank"
                        title="GitHub"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/docs/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



                
                <span>Docs</span>
            </a>
        </li>
        
        

        <li >
            <a href='/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        

        <li >
            <a href='/docs/getstarted/get-started' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                
                <span>Get Started</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/docs/" >
                Docs
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/docs/getstarted/get-started/">Get Started with Oakestra</a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 08, 2022</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    7 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p><img src="/wiki-banner-help.png"
	
	
	
	loading="lazy"
	
	
></p>
<h1 id="get-started-with-oakestra">Get Started with Oakestra</h1>
<p><strong>Table of content:</strong></p>
<ul>
<li><a class="link" href="#high-level-architecture" >High-level archtecture</a></li>
<li><a class="link" href="#create-your-first-oakestra-cluster" >Create your first Oakestra cluster</a></li>
<li><a class="link" href="#deploy-your-first-applications" >Deploy your first applications</a></li>
</ul>
<h2 id="high-level-architecture">High-level architecture</h2>
<p><img src="/getstarted/highLevelArch.png"
	
	
	
	loading="lazy"
	
		alt="High level architecture picture"
	
	
></p>
<p>Oakestra lets you deploy your workload on devices of any size. From a small RasperryPi to a cloud instance far away on GCP or AWS. The tree structure enables you to create multiple clusters of resources.</p>
<ul>
<li>The <strong>Root Orchestrator</strong> manages different clusters of resources. The root only sees aggregated cluster resources.</li>
<li>The <strong>Cluster orchestrator</strong> manages your worker nodes. This component collects the real-time resources and schedules your workloads to the perfect matching device.</li>
<li>A <strong>Worker</strong> is any device where a component called NodeEngine is installed. Each node can support multiple execution environments such as Containers (containerd runtime), MicroVM (containerd runtime), and Unikernels (mirageOS).</li>
</ul>
<p>Disclaimer, currently, only containers are supported. Help is still needed for Unikernels and MicroVMs.</p>
<h2 id="create-your-first-oakestra-cluster">Create your first Oakestra cluster</h2>
<p>Let&rsquo;s start simple with a single node deployment, where all the components are in the same device. Then, we will separate the components and use multiple devices until we&rsquo;re able to create multiple clusters.</p>
<h3 id="requirements">Requirements:</h3>
<ul>
<li>Linux (Workers only)</li>
<li>Docker + Docker compose (Orchestrators only)</li>
</ul>
<h3 id="1-doc-1-device-one-cluster">1-DOC (1 Device, One Cluster)</h3>
<p>In this example, we will use a single device to deploy all the components. This is not recommended for production environments, but it is pretty cool for home environments and development.</p>
<p><img src="/getstarted/SingleNodeExample.png"
	
	
	
	loading="lazy"
	
		alt="Deployment example with a single device"
	
	
></p>
<p><strong>0)</strong> First, let&rsquo;s export the required environment variables</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">## Choose a unique name for your cluster
</span></span><span class="line"><span class="cl">export CLUSTER_NAME=My_Awesome_Cluster
</span></span><span class="line"><span class="cl">## Come up with a name for the current location
</span></span><span class="line"><span class="cl">export CLUSTER_LOCATION=My_Awesome_Apartment
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>1)</strong> now clone the repository and move into it using:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git clone https://github.com/edgeIO/edgeio.git &amp;&amp; cd edgeio
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>2)</strong> Run a local 1-DOC cluster</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo -E docker-compose -f run-a-cluster/1-DOC-&lt;arch&gt;.yml up -d
</span></span></code></pre></td></tr></table>
</div>
</div><p>( please replace &lt; arch &gt; with your device architecture: <strong>arm</strong> or <strong>amd64</strong> )</p>
<p><strong>3)</strong> download, untar and install the node engine package</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">wget -c https://github.com/oakestra/oakestra/releases/download/NodeEngine-v0.02/NodeEngine.tar.gz &amp;&amp; tar -xzf NodeEngine.tar.gz &amp;&amp; cd NodeEngine/build &amp;&amp; chmod +x install.sh &amp;&amp; ./install.sh &lt;arch&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>( please replace &lt; arch &gt; with your device architecture: <strong>arm-7</strong> or <strong>amd64</strong> )</p>
<p><strong>4)</strong> (optional) download and unzip and install the network manager; this enables an overlay network across your services</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">wget -c https://github.com/oakestra/oakestra-net/releases/download/v0.04-experimental/NetManager.tar.gz &amp;&amp; tar -xzf NetManager.tar.gz &amp;&amp; cd NetManager &amp;&amp; chmod +x install.sh &amp;&amp; ./install.sh &lt;arch&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>( please replace &lt; arch &gt; with your device architecture: <strong>arm-7</strong> or <strong>amd64</strong> )</p>
<p>4.1) Edit <code>/etc/netmanager/netcfg.json</code> as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;NodePublicAddress&#34;: &#34;&lt;IP ADDRESS OF THIS DEVICE&gt;&#34;,
</span></span><span class="line"><span class="cl">  &#34;NodePublicPort&#34;: &#34;&lt;PORT REACHABLE FROM OUTSIDE, use 50103 as default&gt;&#34;,
</span></span><span class="line"><span class="cl">  &#34;ClusterUrl&#34;: &#34;localhost&#34;,
</span></span><span class="line"><span class="cl">  &#34;ClusterMqttPort&#34;: &#34;10003&#34;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>4.2) start the NetManager on port 6000</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo NetManager -p 6000 &amp;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>5)</strong> start the NodeEngine. Please only use the <code>-n 6000</code> parameter if you started the network component in step 4. This parameter, in fact, is used to specify the internal port of the network component, if any.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo NodeEngine -n 6000 -p 10100
</span></span></code></pre></td></tr></table>
</div>
</div><p>( you can use <code>NodeEngine -h</code> for further details )</p>
<h3 id="m-doc-m-devices-one-cluster">M-DOC (M Devices, One Cluster)</h3>
<p>The M-DOC deployment enables you to deploy One cluster with multiple worker nodes. The main difference between this deployment and 1-DOC is that the worker nodes might be external here, and there can be multiple of them.</p>
<p><img src="/getstarted/1ClusterExample.png"
	
	
	
	loading="lazy"
	
	
></p>
<p>The deployment of this kind of cluster is similar to 1-DOC. We first need to start the root and cluster orchestrator. Afterward, we can attach the worker nodes.</p>
<p><strong>1)</strong> On the node you wish to use as a cluster and root orchestrator, execute steps <strong>1-DOC.1</strong> and <strong>1-DOC.2</strong></p>
<p><strong>2)</strong> Now, we need to prepare all the worker nodes. On each worker node, execute the following:</p>
<p>2.1) Downlaod and unpack both the NodeEngine and the NetManager:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">wget -c https://github.com/oakestra/oakestra/releases/download/NodeEngine-v0.02/NodeEngine.tar.gz &amp;&amp; tar -xzf NodeEngine.tar.gz &amp;&amp; cd NodeEngine/build &amp;&amp; chmod +x install.sh &amp;&amp; ./install.sh &lt;arch&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">wget -c https://github.com/oakestra/oakestra-net/releases/download/v0.04-experimental/NetManager.tar.gz &amp;&amp; tar -xzf NetManager.tar.gz &amp;&amp; cd NetManager &amp;&amp; chmod +x install.sh &amp;&amp; ./install.sh &lt;arch&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.2) Edit <code>/etc/netmanager/netcfg.json</code> accordingly:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;NodePublicAddress&#34;: &#34;&lt;IP ADDRESS OF THIS DEVICE&gt;&#34;,
</span></span><span class="line"><span class="cl">  &#34;NodePublicPort&#34;: &#34;&lt;PORT REACHABLE FROM OUTSIDE, use 50103 as default&gt;&#34;,
</span></span><span class="line"><span class="cl">  &#34;ClusterUrl&#34;: &#34;&lt;IP ADDRESS OF THE CLSUTER ORCHESTRATOR&gt;&#34;,
</span></span><span class="line"><span class="cl">  &#34;ClusterMqttPort&#34;: &#34;10003&#34;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.3) Run the NetManager and the NodeEngine components:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo NetManager -p 6000 &amp;
</span></span><span class="line"><span class="cl">sudo NodeEngine -n 6000 -p 10100 -a &lt;IP ADDRESS OF THE CLSUTER ORCHESTRATOR&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mdnc-m-devices-n-clusters">MDNC (M Devices, N Clusters)</h3>
<p>This represents the most versatile deployment. You can split your resources into multiple clusters within different locations and with different resources. In this deployment, we need to deploy the Root and the Cluster orchestrator on different nodes. Each independent clsuter orchestrator represents a cluster of resources. The worker nodes attached to each cluster are aggregated and seen as a unique big resource from the point of view of the Root. This deployment isolates the resources from the root perspective and delegates the responsibility to the cluster orchestrator.
<img src="/getstarted/2ClusterExample.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><strong>1)</strong> In this first step, we need to deploy the RootOrchestrator component on a Node. To do this, you need to clone the repository on the desired node, move to the root orchestrator folder, and execute the startup command.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git clone https://github.com/edgeIO/edgeio.git &amp;&amp; cd edgeio
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo -E docker-compose -f root_orchestrator/docker-compose-&lt;arch&gt;.yml up
</span></span></code></pre></td></tr></table>
</div>
</div><p>( please replace &lt; arch &gt; with your device architecture: <strong>arm</strong> or <strong>amd64</strong> )</p>
<p><strong>2)</strong> For each node that needs to host a cluster orchestrator, you need to:
2.1) Export the ENV variables needed to connect to the cluster orchestrator:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">export SYSTEM_MANAGER_URL=&lt;IP ADDRESS OF THE NODE HOSTING THE ROOT ORCHESTRATOR&gt;
</span></span><span class="line"><span class="cl">export CLUSTER_NAME=&lt;choose a name for your cluster&gt;
</span></span><span class="line"><span class="cl">export CLUSTER_LOCATION=&lt;choose a name for the cluster&#39;s location&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>2.2) Clone the repo and run the cluster orchestrator:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">git clone https://github.com/edgeIO/edgeio.git &amp;&amp; cd edgeio
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">sudo -E docker-compose -f cluster_orchestrator/docker-compose-&lt;arch&gt;.yml up
</span></span></code></pre></td></tr></table>
</div>
</div><p>( please replace &lt; arch &gt; with your device architecture: <strong>arm</strong> or <strong>amd64</strong> )</p>
<p><strong>3)</strong> Start and configure each worker as described in M-DOC.2</p>
<h3 id="hybrids">Hybrids</h3>
<p>You should have got the gist now, but if you want, you can build the infrastructure by composing the components like LEGO blocks.
Do you want to give your Cluster Orchestrator computational capabilities for the deployment? Deploy there the NodeEngine+Netmanager components, and you&rsquo;re done. You don&rsquo;t want to use a separate node for the Root Orchestrator? Simply deploy it all together with a cluster orchestrator.</p>
<h2 id="deploy-your-first-application">Deploy your first application</h2>
<p>Let&rsquo;s try deploying an Nginx server and a client. Then we&rsquo;ll enter inside the client container and try to curl Nginx.</p>
<p>All we need to do to deploy an application is to create a deployment descriptor and submit it to the platform using the CLI.</p>
<h3 id="deployment-descriptors">Deployment descriptors</h3>
<p><strong>1)</strong> Let&rsquo;s create the Nginx deployment descriptor. Create a file named <code>nginx.yaml</code> and insert the following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">api_version: v0.1
</span></span><span class="line"><span class="cl">app_name: Nginx
</span></span><span class="line"><span class="cl">app_ns: default
</span></span><span class="line"><span class="cl">service_name: server
</span></span><span class="line"><span class="cl">service_ns: default
</span></span><span class="line"><span class="cl">image: docker.io/library/nginx:latest
</span></span><span class="line"><span class="cl">image_runtime: docker
</span></span><span class="line"><span class="cl">RR_ip: 10.30.30.30
</span></span><span class="line"><span class="cl">port: 80:80
</span></span><span class="line"><span class="cl">cmd: []
</span></span><span class="line"><span class="cl">requirements:
</span></span><span class="line"><span class="cl">    cpu: 1 # cores
</span></span><span class="line"><span class="cl">    memory: 200  # in MB
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>2)</strong> Let&rsquo;s create a client container using the curl image. Create a file named <code>client.yaml</code> and insert the following.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">api_version: v0.1
</span></span><span class="line"><span class="cl">app_name: Client
</span></span><span class="line"><span class="cl">app_ns: default
</span></span><span class="line"><span class="cl">service_name: client
</span></span><span class="line"><span class="cl">service_ns: default
</span></span><span class="line"><span class="cl">image: docker.io/curlimages/curl:7.82.0
</span></span><span class="line"><span class="cl">image_runtime: docker
</span></span><span class="line"><span class="cl">commands: [&#34;sh&#34;, &#34;-c&#34;, &#34;tail -f /dev/null&#34;]
</span></span><span class="line"><span class="cl">requirements:
</span></span><span class="line"><span class="cl">    cpu: 1 # cores
</span></span><span class="line"><span class="cl">    memory: 100  # in MB
</span></span></code></pre></td></tr></table>
</div>
</div><p>A detailed description of these fields can be found in the <strong>Deployment descriptors</strong> section of the Wiki.</p>
<h3 id="deployment-cli">Deployment CLI</h3>
<p>On the root orchestrator&rsquo;s node use the following commands to deploy the Nginx container and then the Client container.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl -F file=@&#39;nginx.yaml&#39; http://localhost:10000/api/deploy -v
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">curl -F file=@&#39;client.yaml&#39; http://localhost:10000/api/deploy -v
</span></span></code></pre></td></tr></table>
</div>
</div><p>Check the status of the deployment:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl localhost:10000/api/jobs | json_pp
</span></span></code></pre></td></tr></table>
</div>
</div><p>If both services show the status <strong>ACTIVE</strong> then everything went fine. Otherwise, there might be a configuration issue or a bug. Please debug it with <code>docker logs system_manager -f --tail=100</code> on the root orchestrator and with <code>docker logs cluster_manager -f --tail=100</code> on the cluster orchestrator and open an issue.</p>
<p>If both services are ACTIVE is time to test the communication.</p>
<p>Move into the worker node hosting the client and use the following command to log into the container.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">sudo ctr -n edge.io task exec --exec-id term1 Client.default.client.default /bin/sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once we are inside our client, we can curl the Nginx server and check if everything works.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">curl 10.30.30.30
</span></span></code></pre></td></tr></table>
</div>
</div><p>Note that this address is the one we specified in the Nginx&rsquo;s deployment descriptor.</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/getsarted/">GetSarted</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">Related content</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="">
    <a href="/docs/oakestra/architecture/">
        
        

        <div class="article-details">
            <h2 class="article-title">High level architecture</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2022 Oakestra
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.13.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#high-level-architecture">High-level architecture</a></li>
    <li><a href="#create-your-first-oakestra-cluster">Create your first Oakestra cluster</a>
      <ol>
        <li><a href="#requirements">Requirements:</a></li>
        <li><a href="#1-doc-1-device-one-cluster">1-DOC (1 Device, One Cluster)</a></li>
        <li><a href="#m-doc-m-devices-one-cluster">M-DOC (M Devices, One Cluster)</a></li>
        <li><a href="#mdnc-m-devices-n-clusters">MDNC (M Devices, N Clusters)</a></li>
        <li><a href="#hybrids">Hybrids</a></li>
      </ol>
    </li>
    <li><a href="#deploy-your-first-application">Deploy your first application</a>
      <ol>
        <li><a href="#deployment-descriptors">Deployment descriptors</a></li>
        <li><a href="#deployment-cli">Deployment CLI</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
